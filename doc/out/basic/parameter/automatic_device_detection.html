<!doctype html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="../../main.css">
 </head>
 <body>
  <div id="readme" class="Box">
   <article class="markdown-body container-lg">
    <h1>Automatic device detection with profile naming convention</h1>
    <p>You can determine the virtual/real device to use in the test by profile naming convention.</p>
    <h2>As of version 1.x</h2>
    <p>As of shirates-core version 1.x, you have to configure profile to give capabilities that required for the device you want to use explicitly.</p>
    <h4>testConfig.json</h4>
    <pre><code>...
  "profiles": [
    {
      "profileName": "Android 12",
      "capabilities": {
        "automationName": "UiAutomator2",
        "platformName": "Android",
        "platformVersion": "12"
      }
    }
  ]
...  
</code></pre>
    <h2>As of version 2.x</h2>
    <p>Now you can specify the device that you want to use by <strong>Profile Naming Convention</strong>. You donâ€™t have to configure profile in profile capabilities in config.json. Just specify profile name.</p>
    <h4>testConfig.json</h4>
    <pre><code>...
  "profiles": [
  ]
...  
</code></pre>
    <h3>Example (Android)</h3>
    <p>You can specify AVD name as profile name in testrun file.</p>
    <h4>testrun.properties</h4>
    <pre><code>android.profile=Pixel 3a API 31
</code></pre>
    <p>Run the test. AVD <code>Pixel 3a API 31</code> is searched and launched.</p>
    <h4>Console</h4>
    <pre><code>63	2022/12/19 01:09:50.808	{}	[info]	()	Searching device for the profile. (profileName=Pixel 3a API 31)
64	2022/12/19 01:09:54.224	{}	[info]	()	emulator @Pixel_3a_API_31 -no-boot-anim -no-snapshot
65	2022/12/19 01:10:00.423	{}	[info]	()	Connected device found. (Pixel_3a_API_31:5554, Android 12, emulator-5554)
</code></pre>
    <h3>Example (iOS)</h3>
    <p>You can specify simulator device name as profile name in testrun file.</p>
    <h4>testrun.properties</h4>
    <pre><code>os=ios
ios.profile=iPhone 14(iOS 16.1)
</code></pre>
    <p>Run the test. Simulator device <code>iPhone 14(iOS 16.1)</code> is searched and launched.</p>
    <h4>Console</h4>
    <pre><code>61	2022/12/19 01:20:34.730	{}	[info]	()	Searching device for the profile. (profileName=iPhone 14(iOS 16.0)-01)
62	2022/12/19 01:20:38.265	{}	[info]	()	Device found. (iPhone 14(iOS 16.0)-01, iOS 16.0, 4801481D-60AA-4A1A-BFC5-4C636ADF4B3A)
</code></pre>
    <h2>Profile Naming Convention</h2>
    <h3>Android</h3>
    <table>
     <thead>
      <tr>
       <th align="left">Pattern</th>
       <th align="left">Profile Name</th>
       <th align="left">Description</th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left"><em>AVD name</em></td>
       <td align="left">Pixel 3a API 31</td>
       <td align="left">Android virtual device <code>Pixel 3a API 31</code></td>
      </tr>
      <tr>
       <td align="left"><em>model</em>(<em>os_version</em>)</td>
       <td align="left">Pixel 3a(Android 12)</td>
       <td align="left">Connected device <code>Pixel 3a(Android 12)</code></td>
      </tr>
      <tr>
       <td align="left"><em>model</em>(<em>os_version</em>)</td>
       <td align="left">Pixel 3a(12)</td>
       <td align="left">Connected device <code>Pixel 3a(Android 12)</code></td>
      </tr>
      <tr>
       <td align="left"><em>os_version</em></td>
       <td align="left">Android *</td>
       <td align="left">Connected device</td>
      </tr>
      <tr>
       <td align="left"><em>os_version</em></td>
       <td align="left">Android 12</td>
       <td align="left">Connected device <code>Android 12</code></td>
      </tr>
      <tr>
       <td align="left"><em>os_version</em></td>
       <td align="left">12</td>
       <td align="left">Connected device <code>Android 12</code></td>
      </tr>
      <tr>
       <td align="left"><em>udid</em></td>
       <td align="left">emulator-5554</td>
       <td align="left">Connected emulator <code>udid:emulator-5554</code></td>
      </tr>
      <tr>
       <td align="left"><em>udid</em></td>
       <td align="left">14141JEC20492X</td>
       <td align="left">Connected real device <code>udid:14141JEC20492X</code></td>
      </tr>
     </tbody>
    </table>
    <h3>iOS</h3>
    <table>
     <thead>
      <tr>
       <th align="left">Pattern</th>
       <th align="left">Profile Name</th>
       <th align="left">Description</th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left"><em>deviceName</em></td>
       <td align="left">Device 1</td>
       <td align="left">iOS device named <code>Device 1</code></td>
      </tr>
      <tr>
       <td align="left"><em>os_version</em></td>
       <td align="left">16.2</td>
       <td align="left">iOS device (iOS 16.2)</td>
      </tr>
      <tr>
       <td align="left"><em>model</em>(<em>os_version</em>)</td>
       <td align="left">iPhone *</td>
       <td align="left">iOS device</td>
      </tr>
      <tr>
       <td align="left"><em>model</em></td>
       <td align="left">iPhone 14</td>
       <td align="left">iOS device (iPhone 14)</td>
      </tr>
      <tr>
       <td align="left"><em>model</em>(<em>os_version</em>)</td>
       <td align="left">iPhone 14(16.2)</td>
       <td align="left">iOS device (iPhone 14, iOS 16.2)</td>
      </tr>
      <tr>
       <td align="left"><em>udid</em></td>
       <td align="left">D0A63437-19F6-4756-8F27-8B1AA9EC22A4</td>
       <td align="left">iOS device (udid:D0A63437-19F6-4756-8F27-8B1AA9EC22A4)</td>
      </tr>
     </tbody>
    </table>
    <h3>Android Emulator</h3>
    <p>Open <strong>Android Studio</strong> and see <strong>virtual</strong> tab in <strong>Device Manager</strong>.</p>
    <p><img src="../_images/device-manager-virtual.png" alt="Device Manager"></p>
    <p>You can specify <em>AVD name</em> as profile name.</p>
    <ul>
     <li><code>Pixel 3a(Android 12)</code></li>
     <li><code>Pixel 3a(Android 12)-01</code></li>
     <li><code>Pixel 3a(Android 12)-02</code></li>
     <li><code>Pixel 3a(Android 12)-03</code></li>
    </ul>
    <p>Specified AVD is automatically launched in test startup process if it is not launched.</p>
    <h3>iOS Simulator</h3>
    <p>Open <strong>Xcode</strong> and see <strong>Simulators</strong> tab.</p>
    <p><img src="../_images/devices-and-simulators.png" alt="Device Manager"></p>
    <p>You can specify <em>simulator device name</em> as profile name.</p>
    <ul>
     <li><code>iPhone 14(16.0)</code></li>
     <li><code>iPhone 14(16.1)</code></li>
     <li><code>iPhone 14 Plus(16.0)</code></li>
     <li><code>iPhone 14 Plus(16.1)</code></li>
     <li><code>iPhone 14 Pro(16.0)</code></li>
     <li><code>iPhone 14 Pro(16.1)</code></li>
     <li><code>iPhone 14 Pro Max(16.0)</code></li>
     <li><code>iPhone 14 Pro Max(16.1)</code></li>
    </ul>
    <p>Specified simulator device is automatically launched in test startup process if it is not launched.</p>
    <p><br></p>
    <h3>Link</h3>
    <ul>
     <li><a href="../../index.html">index</a></li>
    </ul>
   </article>
  </div>
 </body>
</html>