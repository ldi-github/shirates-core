<!doctype html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="../../main.css">
 </head>
 <body>
  <div id="readme" class="Box">
   <article class="markdown-body container-lg">
    <h1>Due to JRE encapsulation, low level data structures needed for fast conversion of BufferedImages are no longer accessible.</h1>
    <h2>Message</h2>
    <p><code>Due to JRE encapsulation, low level data structures needed for fast conversion of BufferedImages are no longer accessible. You can work around this by adding the following to your java command: --add-exports=java.desktop/sun.awt.image=ALL-UNNAMED</code></p>
    <h2>Cause</h2>
    <p>Dependent computer vision library <code>BoofCV</code> uses hidden API to improve performance.</p>
    <p>See <a href="https://github.com/lessthanoptimal/BoofCV/issues/175">An illegal reflective access operation has occurred #175</a></p>
    <h2>Solution</h2>
    <p>Set <code>--add-exports</code> to JVM args as follows.</p>
    <h3>IntelliJ (JUnit)</h3>
    <ol>
     <li>Run &gt; Edit Configurations &gt; Edit configuration templates</li>
     <li>Select <strong>JUnit</strong></li>
     <li>Add <code>--add-exports=java.desktop/sun.awt.image=ALL-UNNAMED</code> to JVM args. <br><img src="../_images/run_debug_configuration_template_junit_add_exports.png" alt=""></li>
     <li>Remove existing run/debug configuration. <br><img src="../_images/remove_existing_configuration.png" alt=""></li>
    </ol>
    <p>Now you can apply <code>--add-exports</code> option to every JUnit run/debug configuration by default.</p>
    <h3>Gradle</h3>
    <p>Add <code>jvmArgs</code> as follows.</p>
    <h4>build.gradle.kts</h4>
    <pre><code>tasks.test {
    useJUnitPlatform()
    jvmArgs = listOf(
        "--add-exports", "java.desktop/sun.awt.image=ALL-UNNAMED"
    )
}
</code></pre>
    <h2>Note</h2>
    <p>See also <a href="../warnings/anIllegalRefrectiveAccessOperationHasOccured.html">WARNING: An illegal reflective access operation has occurred</a></p>
    <h3>Link</h3>
    <ul>
     <li><a href="../error_warning_messages.html">Error messages / Warning messages</a></li>
    </ul>
   </article>
  </div>
 </body>
</html>